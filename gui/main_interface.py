# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'main_interface.ui'
#
# Created by: PyQt5 UI code generator 5.15.7
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


import functools
from ipaddress import ip_address
from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1041, 847)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(710, 80, 171, 31))
        self.label.setObjectName("label")
        self.pidR_kp = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidR_kp.setGeometry(QtCore.QRect(800, 120, 68, 41))
        self.pidR_kp.setObjectName("pidR_kp")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(750, 130, 31, 20))
        self.label_2.setObjectName("label_2")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(750, 180, 31, 20))
        self.label_3.setObjectName("label_3")
        self.pidR_kd = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidR_kd.setGeometry(QtCore.QRect(800, 170, 68, 41))
        self.pidR_kd.setObjectName("pidR_kd")
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(750, 230, 31, 20))
        self.label_4.setObjectName("label_4")
        self.pidR_ki = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidR_ki.setGeometry(QtCore.QRect(800, 220, 68, 41))
        self.pidR_ki.setObjectName("pidR_ki")
        self.label_6 = QtWidgets.QLabel(self.centralwidget)
        self.label_6.setGeometry(QtCore.QRect(710, 270, 171, 31))
        self.label_6.setObjectName("label_6")
        self.pidP_ki = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidP_ki.setGeometry(QtCore.QRect(800, 410, 68, 41))
        self.pidP_ki.setObjectName("pidP_ki")
        self.pidP_kp = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidP_kp.setGeometry(QtCore.QRect(800, 310, 68, 41))
        self.pidP_kp.setObjectName("pidP_kp")
        self.pidP_kd = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidP_kd.setGeometry(QtCore.QRect(800, 360, 68, 41))
        self.pidP_kd.setObjectName("pidP_kd")
        self.pidY_kp_3 = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidY_kp_3.setGeometry(QtCore.QRect(800, 600, 68, 41))
        self.pidY_kp_3.setObjectName("pidY_kp_3")
        self.pidY_kp_2 = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidY_kp_2.setGeometry(QtCore.QRect(800, 550, 68, 41))
        self.pidY_kp_2.setObjectName("pidY_kp_2")
        self.label_11 = QtWidgets.QLabel(self.centralwidget)
        self.label_11.setGeometry(QtCore.QRect(710, 460, 171, 31))
        self.label_11.setObjectName("label_11")
        self.pidY_kp = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.pidY_kp.setGeometry(QtCore.QRect(800, 500, 68, 41))
        self.pidY_kp.setObjectName("pidY_kp")
        self.stopButton = QtWidgets.QPushButton(self.centralwidget)
        self.stopButton.setGeometry(QtCore.QRect(20, 770, 84, 34))
        self.stopButton.setObjectName("stopButton")
        self.calibrateButton = QtWidgets.QPushButton(self.centralwidget)
        self.calibrateButton.setGeometry(QtCore.QRect(120, 770, 84, 34))
        self.calibrateButton.setObjectName("calibrateButton")
        self.armButton = QtWidgets.QPushButton(self.centralwidget)
        self.armButton.setGeometry(QtCore.QRect(220, 770, 84, 34))
        self.armButton.setObjectName("armButton")
        self.roll_slider = QtWidgets.QSlider(self.centralwidget)
        self.roll_slider.setEnabled(True)
        self.roll_slider.setGeometry(QtCore.QRect(120, 670, 271, 20))
        self.roll_slider.setMinimum(-90)
        self.roll_slider.setMaximum(90)
        self.roll_slider.setProperty("value", 0)
        self.roll_slider.setTracking(True)
        self.roll_slider.setOrientation(QtCore.Qt.Horizontal)
        self.roll_slider.setObjectName("roll_slider")
        self.label_13 = QtWidgets.QLabel(self.centralwidget)
        self.label_13.setGeometry(QtCore.QRect(30, 660, 61, 31))
        self.label_13.setObjectName("label_13")
        self.pitch_slider = QtWidgets.QSlider(self.centralwidget)
        self.pitch_slider.setEnabled(True)
        self.pitch_slider.setGeometry(QtCore.QRect(470, 550, 31, 251))
        self.pitch_slider.setMinimum(-90)
        self.pitch_slider.setMaximum(90)
        self.pitch_slider.setProperty("value", 0)
        self.pitch_slider.setOrientation(QtCore.Qt.Vertical)
        self.pitch_slider.setObjectName("pitch_slider")
        self.label_14 = QtWidgets.QLabel(self.centralwidget)
        self.label_14.setGeometry(QtCore.QRect(450, 500, 61, 31))
        self.label_14.setObjectName("label_14")
        self.label_16 = QtWidgets.QLabel(self.centralwidget)
        self.label_16.setGeometry(QtCore.QRect(110, 650, 55, 18))
        self.label_16.setObjectName("label_16")
        self.label_17 = QtWidgets.QLabel(self.centralwidget)
        self.label_17.setGeometry(QtCore.QRect(370, 650, 55, 18))
        self.label_17.setObjectName("label_17")
        self.label_18 = QtWidgets.QLabel(self.centralwidget)
        self.label_18.setGeometry(QtCore.QRect(250, 650, 21, 18))
        self.label_18.setObjectName("label_18")
        self.label_19 = QtWidgets.QLabel(self.centralwidget)
        self.label_19.setGeometry(QtCore.QRect(100, 100, 81, 31))
        self.label_19.setObjectName("label_19")
        self.label_5 = QtWidgets.QLabel(self.centralwidget)
        self.label_5.setGeometry(QtCore.QRect(750, 320, 31, 20))
        self.label_5.setObjectName("label_5")
        self.label_7 = QtWidgets.QLabel(self.centralwidget)
        self.label_7.setGeometry(QtCore.QRect(750, 370, 31, 20))
        self.label_7.setObjectName("label_7")
        self.label_8 = QtWidgets.QLabel(self.centralwidget)
        self.label_8.setGeometry(QtCore.QRect(750, 420, 31, 20))
        self.label_8.setObjectName("label_8")
        self.label_9 = QtWidgets.QLabel(self.centralwidget)
        self.label_9.setGeometry(QtCore.QRect(750, 560, 31, 20))
        self.label_9.setObjectName("label_9")
        self.label_10 = QtWidgets.QLabel(self.centralwidget)
        self.label_10.setGeometry(QtCore.QRect(750, 510, 31, 20))
        self.label_10.setObjectName("label_10")
        self.label_12 = QtWidgets.QLabel(self.centralwidget)
        self.label_12.setGeometry(QtCore.QRect(750, 610, 31, 20))
        self.label_12.setObjectName("label_12")
        self.label_23 = QtWidgets.QLabel(self.centralwidget)
        self.label_23.setGeometry(QtCore.QRect(500, 670, 21, 18))
        self.label_23.setObjectName("label_23")
        self.label_24 = QtWidgets.QLabel(self.centralwidget)
        self.label_24.setGeometry(QtCore.QRect(500, 780, 55, 18))
        self.label_24.setObjectName("label_24")
        self.label_25 = QtWidgets.QLabel(self.centralwidget)
        self.label_25.setGeometry(QtCore.QRect(500, 550, 55, 18))
        self.label_25.setObjectName("label_25")
        self.label_15 = QtWidgets.QLabel(self.centralwidget)
        self.label_15.setGeometry(QtCore.QRect(10, 20, 111, 31))
        self.label_15.setObjectName("label_15")
        self.label_26 = QtWidgets.QLabel(self.centralwidget)
        self.label_26.setGeometry(QtCore.QRect(170, 200, 61, 31))
        self.label_26.setObjectName("label_26")
        self.label_27 = QtWidgets.QLabel(self.centralwidget)
        self.label_27.setGeometry(QtCore.QRect(160, 260, 61, 31))
        self.label_27.setObjectName("label_27")
        self.label_28 = QtWidgets.QLabel(self.centralwidget)
        self.label_28.setGeometry(QtCore.QRect(160, 230, 61, 31))
        self.label_28.setObjectName("label_28")
        self.motor0 = QtWidgets.QDial(self.centralwidget)
        self.motor0.setGeometry(QtCore.QRect(30, 50, 221, 141))
        self.motor0.setMinimum(900)
        self.motor0.setMaximum(1500)
        self.motor0.setWrapping(False)
        self.motor0.setNotchesVisible(False)
        self.motor0.setObjectName("motor0")
        self.label_20 = QtWidgets.QLabel(self.centralwidget)
        self.label_20.setGeometry(QtCore.QRect(330, 100, 81, 31))
        self.label_20.setObjectName("label_20")
        self.label_21 = QtWidgets.QLabel(self.centralwidget)
        self.label_21.setGeometry(QtCore.QRect(330, 340, 81, 31))
        self.label_21.setObjectName("label_21")
        self.label_22 = QtWidgets.QLabel(self.centralwidget)
        self.label_22.setGeometry(QtCore.QRect(100, 340, 81, 31))
        self.label_22.setObjectName("label_22")
        self.motor1 = QtWidgets.QDial(self.centralwidget)
        self.motor1.setGeometry(QtCore.QRect(260, 50, 221, 141))
        self.motor1.setMinimum(900)
        self.motor1.setMaximum(1500)
        self.motor1.setWrapping(False)
        self.motor1.setNotchesVisible(False)
        self.motor1.setObjectName("motor1")
        self.motor3 = QtWidgets.QDial(self.centralwidget)
        self.motor3.setGeometry(QtCore.QRect(260, 290, 221, 141))
        self.motor3.setMinimum(900)
        self.motor3.setMaximum(1500)
        self.motor3.setWrapping(False)
        self.motor3.setNotchesVisible(False)
        self.motor3.setObjectName("motor3")
        self.motor2 = QtWidgets.QDial(self.centralwidget)
        self.motor2.setGeometry(QtCore.QRect(30, 290, 221, 141))
        self.motor2.setMinimum(900)
        self.motor2.setMaximum(1500)
        self.motor2.setWrapping(False)
        self.motor2.setNotchesVisible(False)
        self.motor2.setObjectName("motor2")
        self.motor0_lbl = QtWidgets.QLabel(self.centralwidget)
        self.motor0_lbl.setGeometry(QtCore.QRect(110, 130, 55, 18))
        self.motor0_lbl.setObjectName("motor0_lbl")
        self.motor1_lbl = QtWidgets.QLabel(self.centralwidget)
        self.motor1_lbl.setGeometry(QtCore.QRect(340, 130, 55, 18))
        self.motor1_lbl.setObjectName("motor1_lbl")
        self.motor3_lbl = QtWidgets.QLabel(self.centralwidget)
        self.motor3_lbl.setGeometry(QtCore.QRect(340, 370, 55, 18))
        self.motor3_lbl.setObjectName("motor3_lbl")
        self.motor2_lbl = QtWidgets.QLabel(self.centralwidget)
        self.motor2_lbl.setGeometry(QtCore.QRect(110, 370, 55, 18))
        self.motor2_lbl.setObjectName("motor2_lbl")
        self.label_29 = QtWidgets.QLabel(self.centralwidget)
        self.label_29.setGeometry(QtCore.QRect(240, 200, 55, 21))
        self.label_29.setObjectName("label_29")
        self.label_30 = QtWidgets.QLabel(self.centralwidget)
        self.label_30.setGeometry(QtCore.QRect(240, 230, 55, 21))
        self.label_30.setObjectName("label_30")
        self.label_31 = QtWidgets.QLabel(self.centralwidget)
        self.label_31.setGeometry(QtCore.QRect(240, 260, 55, 21))
        self.label_31.setObjectName("label_31")
        self.label_32 = QtWidgets.QLabel(self.centralwidget)
        self.label_32.setGeometry(QtCore.QRect(210, 470, 111, 31))
        self.label_32.setObjectName("label_32")
        self.label_33 = QtWidgets.QLabel(self.centralwidget)
        self.label_33.setGeometry(QtCore.QRect(740, 20, 111, 31))
        self.label_33.setObjectName("label_33")
        self.label_34 = QtWidgets.QLabel(self.centralwidget)
        self.label_34.setGeometry(QtCore.QRect(730, 660, 111, 31))
        self.label_34.setObjectName("label_34")
        self.label_35 = QtWidgets.QLabel(self.centralwidget)
        self.label_35.setGeometry(QtCore.QRect(640, 700, 171, 31))
        self.label_35.setObjectName("label_35")
        self.lineEdit = QtWidgets.QLineEdit(self.centralwidget)
        self.lineEdit.setGeometry(QtCore.QRect(800, 740, 181, 32))
        self.lineEdit.setObjectName("lineEdit")
        self.label_36 = QtWidgets.QLabel(self.centralwidget)
        self.label_36.setGeometry(QtCore.QRect(650, 740, 141, 31))
        self.label_36.setObjectName("label_36")
        self.connectButton = QtWidgets.QPushButton(self.centralwidget)
        self.connectButton.setGeometry(QtCore.QRect(760, 780, 84, 34))
        self.connectButton.setObjectName("connectButton")
        self.label_37 = QtWidgets.QLabel(self.centralwidget)
        self.label_37.setGeometry(QtCore.QRect(820, 700, 91, 31))
        self.label_37.setObjectName("label_37")
        self.motor0.raise_()
        self.label.raise_()
        self.pidR_kp.raise_()
        self.label_2.raise_()
        self.label_3.raise_()
        self.pidR_kd.raise_()
        self.label_4.raise_()
        self.pidR_ki.raise_()
        self.label_6.raise_()
        self.pidP_ki.raise_()
        self.pidP_kp.raise_()
        self.pidP_kd.raise_()
        self.pidY_kp_3.raise_()
        self.pidY_kp_2.raise_()
        self.label_11.raise_()
        self.pidY_kp.raise_()
        self.stopButton.raise_()
        self.calibrateButton.raise_()
        self.armButton.raise_()
        self.roll_slider.raise_()
        self.label_13.raise_()
        self.pitch_slider.raise_()
        self.label_14.raise_()
        self.label_16.raise_()
        self.label_17.raise_()
        self.label_18.raise_()
        self.label_19.raise_()
        self.label_5.raise_()
        self.label_7.raise_()
        self.label_8.raise_()
        self.label_9.raise_()
        self.label_10.raise_()
        self.label_12.raise_()
        self.label_23.raise_()
        self.label_24.raise_()
        self.label_25.raise_()
        self.label_15.raise_()
        self.label_26.raise_()
        self.label_27.raise_()
        self.label_28.raise_()
        self.label_20.raise_()
        self.label_21.raise_()
        self.label_22.raise_()
        self.motor1.raise_()
        self.motor3.raise_()
        self.motor2.raise_()
        self.motor0_lbl.raise_()
        self.motor1_lbl.raise_()
        self.motor3_lbl.raise_()
        self.motor2_lbl.raise_()
        self.label_29.raise_()
        self.label_30.raise_()
        self.label_31.raise_()
        self.label_32.raise_()
        self.label_33.raise_()
        self.label_34.raise_()
        self.label_35.raise_()
        self.lineEdit.raise_()
        self.label_36.raise_()
        self.connectButton.raise_()
        self.label_37.raise_()
        MainWindow.setCentralWidget(self.centralwidget)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.label.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">PID ROLL VALUES</span></p></body></html>"))
        self.label_2.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kp</span></p></body></html>"))
        self.label_3.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kd</span></p></body></html>"))
        self.label_4.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Ki</span></p></body></html>"))
        self.label_6.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">PID PITCH VALUES</span></p></body></html>"))
        self.label_11.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">PID YAW VALUES</span></p></body></html>"))
        self.stopButton.setText(_translate("MainWindow", "Stop"))
        self.calibrateButton.setText(_translate("MainWindow", "Calibrate"))
        self.armButton.setText(_translate("MainWindow", "Arm"))
        self.label_13.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">ROLL</span></p></body></html>"))
        self.label_14.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">PITCH</span></p></body></html>"))
        self.label_16.setText(_translate("MainWindow", "-90°"))
        self.label_17.setText(_translate("MainWindow", "90°"))
        self.label_18.setText(_translate("MainWindow", "0 °"))
        self.label_19.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Motor 0</span></p></body></html>"))
        self.label_5.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kp</span></p></body></html>"))
        self.label_7.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kd</span></p></body></html>"))
        self.label_8.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Ki</span></p></body></html>"))
        self.label_9.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kd</span></p></body></html>"))
        self.label_10.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Kp</span></p></body></html>"))
        self.label_12.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Ki</span></p></body></html>"))
        self.label_23.setText(_translate("MainWindow", "0 °"))
        self.label_24.setText(_translate("MainWindow", "-90°"))
        self.label_25.setText(_translate("MainWindow", "90°"))
        self.label_15.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Telemetry</span></p></body></html>"))
        self.label_26.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">ROLL</span></p></body></html>"))
        self.label_27.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">YAW</span></p></body></html>"))
        self.label_28.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">PITCH</span></p></body></html>"))
        self.label_20.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Motor 1</span></p></body></html>"))
        self.label_21.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Motor 3</span></p></body></html>"))
        self.label_22.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Motor 2</span></p></body></html>"))
        self.motor0_lbl.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">900</span></p></body></html>"))
        self.motor1_lbl.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">900</span></p></body></html>"))
        self.motor3_lbl.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">900</span></p></body></html>"))
        self.motor2_lbl.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">900</span></p></body></html>"))
        self.label_29.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:11pt; font-weight:600;\">0 °</span></p></body></html>"))
        self.label_30.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:11pt; font-weight:600;\">0 °</span></p></body></html>"))
        self.label_31.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:11pt; font-weight:600;\">0 °</span></p></body></html>"))
        self.label_32.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Control</span></p></body></html>"))
        self.label_33.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Tuning</span></p></body></html>"))
        self.label_34.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:14pt; font-weight:600;\">Signals</span></p></body></html>"))
        self.label_35.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt; font-weight:600;\">Connection Status</span></p></body></html>"))
        self.label_36.setText(_translate("MainWindow", "<html><head/><body><p><span style=\" font-size:12pt; font-weight:600;\">Broker IP address</span></p></body></html>"))
        self.connectButton.setText(_translate("MainWindow", "Connect"))
        self.label_37.setText(_translate("MainWindow", "Not connected"))


import sys

app = QtWidgets.QApplication(sys.argv)
MainWindow = QtWidgets.QMainWindow()
ui = Ui_MainWindow()
ui.setupUi(MainWindow)
MainWindow.show()

# Now implement all the MQTT logic functions
import paho.mqtt.client as mqtt

# The callback for when the client receives a CONNACK response from the server.
def on_connect(client, userdata, flags, rc):
    print("Connected with result code "+str(rc))
    ui.label_37.setText("Connected")
    # Subscribe to drone only topics
    client.subscribe("drone/#")

# The callback for when a PUBLISH message is received from the server.
def on_message(client, userdata, msg):
    # Tokenize the topic
    topics = str(msg.topic).split('/')
    payload = msg.payload.decode('ascii')
    if (topics[0] == "drone" and topics[1] == "feedback"):
        if (topics[2] == "angle"):
            if (topics[3] == "roll"):
                ui.label_29.setText(str(payload) + '°')
            elif (topics[3] == "pitch"):
                ui.label_30.setText(str(payload) + '°')
            elif (topics[3] == "yaw"):
                ui.label_31.setText(str(payload) + '°')
            else:
                pass
        elif (topics[2] == "motor"):
            if (topics[3] == "0"):
                ui.motor0_lbl.setText(payload)
                ui.motor0.setValue(int(payload))
            elif (topics[3] == "1"):
                ui.motor1_lbl.setText(payload)
                ui.motor1.setValue(int(payload))
            elif (topics[3] == "2"):
                ui.motor2_lbl.setText(payload)
                ui.motor2.setValue(int(payload))
            elif (topics[3] == "3"):
                ui.motor3_lbl.setText(payload)
                ui.motor3.setValue(int(payload))
            else:
                pass
        else:
            pass

def connect_to_broker():
    ip_address = ui.lineEdit.text()
    client.connect(str(ip_address), port=1883)
    client.loop_start()
    pass

def send_target_roll():
    roll = int(ui.roll_slider.value())
    client.publish("drone/control/roll", str(roll))

def send_target_pitch():
    pitch = int(ui.pitch_slider.value())
    client.publish("drone/control/pitch", str(pitch))



# Setup MQTT client object
client = mqtt.Client()
client.on_connect = on_connect
client.on_message = on_message


# Map connect button to the connection of the broker on MQTT
ui.connectButton.clicked.connect(connect_to_broker)
ui.roll_slider.valueChanged.connect(send_target_roll)
ui.pitch_slider.valueChanged.connect(send_target_pitch)



# Exit functions
client.loop_stop()
sys.exit(app.exec_())
